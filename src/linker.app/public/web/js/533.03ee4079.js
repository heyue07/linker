"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[533],{15033:function(e,t,a){a.d(t,{A:function(){return et}});var o=a(56768),l=a(24232),n=a.p+"img/dianchi.2949547b.svg",s=a.p+"img/pay.dc868752.jpg";const r=e=>((0,o.Qi)("data-v-266a4cf4"),e=e(),(0,o.jt)(),e),i={class:"status-wrap flex"},u={class:"copy flex"},d=["title"],c=r((()=>(0,o.Lk)("img",{src:n,alt:"memory"},null,-1))),p={href:"javascript:;"},m={key:0,href:"https://github.com/snltty/linker",target:"_blank"},g={key:1,href:"https://linker.snltty.com",target:"_blank"},v={key:2,href:"https://linker-doc.snltty.com",target:"_blank"},f={key:3,href:"https://v.netzo123.com",target:"_blank"},k=r((()=>(0,o.Lk)("div",{class:"flex-1"},null,-1))),h={class:"export"},w={key:0,class:"api"},b={class:"server"},C={class:"pay"},y={class:"t-c"},_=["title"],F=r((()=>(0,o.Lk)("img",{src:n,alt:"memory"},null,-1))),V=r((()=>(0,o.Lk)("p",{class:"t-c"}," OR ",-1))),$=r((()=>(0,o.Lk)("p",null,[(0,o.Lk)("img",{src:s,alt:"pay",width:"100%"})],-1)));function x(e,t,a,n,s,r){const x=(0,o.g2)("Export"),S=(0,o.g2)("Api"),E=(0,o.g2)("Server"),L=(0,o.g2)("el-dialog");return(0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("div",u,[(0,o.Lk)("a",{href:"javascript:;",class:"memory",title:e.$t("status.support"),onClick:t[0]||(t[0]=e=>n.state.showPay=!0)},[c,(0,o.Lk)("span",null,(0,l.v_)(e.$t("status.support")),1)],8,d),(0,o.Lk)("a",p,"©linker "+(0,l.v_)(n.self.Version),1),n.globalData.isPc?((0,o.uX)(),(0,o.CE)("a",m,"Github")):(0,o.Q3)("",!0),n.globalData.isPc?((0,o.uX)(),(0,o.CE)("a",g,(0,l.v_)(e.$t("status.website")),1)):(0,o.Q3)("",!0),n.globalData.isPc?((0,o.uX)(),(0,o.CE)("a",v,(0,l.v_)(e.$t("status.doc")),1)):(0,o.Q3)("",!0),n.globalData.isPc?((0,o.uX)(),(0,o.CE)("a",f,(0,l.v_)(e.$t("status.cdkey")),1)):(0,o.Q3)("",!0)]),k,(0,o.Lk)("div",h,[(0,o.bF)(x,{config:n.config},null,8,["config"])]),n.globalData.isPc?((0,o.uX)(),(0,o.CE)("div",w,[(0,o.bF)(S,{config:n.config},null,8,["config"])])):(0,o.Q3)("",!0),(0,o.Lk)("div",b,[(0,o.bF)(E,{config:n.config},null,8,["config"])]),(0,o.bF)(L,{modelValue:n.state.showPay,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.showPay=e),title:e.$t("status.support"),width:"80%"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",C,[(0,o.Lk)("p",y,[(0,o.Lk)("a",{href:"https://afdian.com/a/snltty",class:"memory a-line",title:e.$t("status.support"),target:"_blank"},[F,(0,o.Lk)("span",null,(0,l.v_)(e.$t("status.support")),1)],8,_)]),V,$])])),_:1},8,["modelValue","title"])])}var S=a(90144);const E={href:"javascript:;"};function L(e,t,a,n,s,r){const i=(0,o.g2)("Tools"),u=(0,o.g2)("el-icon"),d=(0,o.g2)("el-popconfirm");return n.config?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,l.C4)(["status-api-wrap",{connected:n.connected}])},[(0,o.bF)(d,{"confirm-button-text":e.$t("status.apiClear"),"cancel-button-text":e.$t("status.apiAlter"),title:e.$t("status.apiAlterConfirm"),onCancel:n.handleShow,onConfirm:n.handleResetConnect},{reference:(0,o.k6)((()=>[(0,o.Lk)("a",E,[(0,o.bF)(u,{size:"16"},{default:(0,o.k6)((()=>[(0,o.bF)(i)])),_:1}),(0,o.Lk)("span",null,(0,l.v_)(e.$t("status.api")),1)])])),_:1},8,["confirm-button-text","cancel-button-text","title","onCancel","onConfirm"])],2)):(0,o.Q3)("",!0)}var A=a(53830),W=a(10004),X=a(57477),P={components:{Tools:X.S0q},props:["config"],setup(e){const t=(0,A.B)(),a=(0,o.EW)((()=>t.value.api.connected)),l=()=>{localStorage.setItem("api-cache",""),sessionStorage.setItem("api-cache",""),window.location.reload()},n=()=>{(0,W.e3)(),(0,W.a1)(`ws${"https:"===window.location.protocol?"s":""}://${window.location.hostname}:12345`,"snltty")};return{config:e.config,connected:a,handleShow:n,handleResetConnect:l}}},U=a(71241);const I=(0,U.A)(P,[["render",L],["__scopeId","data-v-129a484d"]]);var N=I;const B={class:"status-server-wrap"};function D(e,t,a,l,n,s){const r=(0,o.g2)("Groups"),i=(0,o.g2)("ServerVersion"),u=(0,o.g2)("Flow");return(0,o.uX)(),(0,o.CE)("div",B,[(0,o.bF)(r,{config:l.config},null,8,["config"]),(0,o.bF)(i,{config:l.config},null,8,["config"]),l.config&&l.hasFlow?((0,o.uX)(),(0,o.Wv)(u,{key:0,config:l.config},null,8,["config"])):(0,o.Q3)("",!0)])}function T(e,t,a,n,s,r){const i=(0,o.g2)("Avatar"),u=(0,o.g2)("el-icon"),d=(0,o.g2)("ArrowDown"),c=(0,o.g2)("el-dropdown-item"),p=(0,o.g2)("el-dropdown-menu"),m=(0,o.g2)("el-dropdown"),g=(0,o.g2)("Groups");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(m,null,{dropdown:(0,o.k6)((()=>[n.hasGroup?((0,o.uX)(),(0,o.Wv)(p,{key:0},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.state.groups,(e=>((0,o.uX)(),(0,o.Wv)(c,{onClick:t=>n.handleGroupChange(e.Id)},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(e.Name||"未知"),1)])),_:2},1032,["onClick"])))),256)),(0,o.bF)(c,{onClick:t[0]||(t[0]=e=>n.state.showGroups=!0)},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(e.$t("status.group")),1)])),_:1})])),_:1})):(0,o.Q3)("",!0)])),default:(0,o.k6)((()=>[(0,o.Lk)("span",{class:(0,l.C4)(["el-dropdown-link",{connected:n.state.connected}])},[(0,o.bF)(u,{class:"left"},{default:(0,o.k6)((()=>[(0,o.bF)(i)])),_:1}),(0,o.Lk)("span",null,(0,l.v_)(n.state.groupName||"未知"),1),(0,o.bF)(u,{class:"right"},{default:(0,o.k6)((()=>[(0,o.bF)(d)])),_:1})],2)])),_:1}),n.state.showGroups?((0,o.uX)(),(0,o.Wv)(g,{key:0,modelValue:n.state.showGroups,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.showGroups=e)},null,8,["modelValue"])):(0,o.Q3)("",!0)],64)}var G=a(69299),z=a(51219),j=a(35931);const Q={class:"group-wrap"},K=["onClick"],O=["onClick"],R=["onClick"],Y={key:0},q={key:1},Z={class:"flex"},H=(0,o.Lk)("span",{class:"flex-1"},null,-1);function J(e,t,a,n,s,r){const i=(0,o.g2)("el-input"),u=(0,o.g2)("el-table-column"),d=(0,o.g2)("Sync"),c=(0,o.g2)("Delete"),p=(0,o.g2)("el-icon"),m=(0,o.g2)("el-button"),g=(0,o.g2)("el-popconfirm"),v=(0,o.g2)("Plus"),f=(0,o.g2)("el-table"),k=(0,o.g2)("el-dialog"),h=(0,o.gN)("trim");return(0,o.uX)(),(0,o.Wv)(k,{class:"options-center",title:e.$t("status.group"),"destroy-on-close":"",modelValue:n.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.show=e),width:"77rem",top:"2vh"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",Q,[(0,o.bF)(f,{stripe:"",data:n.state.list,border:"",size:"small",width:"100%",height:"70vh",onCellDblclick:n.handleCellClick},{default:(0,o.k6)((()=>[(0,o.bF)(u,{prop:"Name",label:e.$t("status.groupName"),width:"100"},{default:(0,o.k6)((e=>[e.row.NameEditing?(0,o.bo)(((0,o.uX)(),(0,o.Wv)(i,{key:0,autofocus:"",size:"small",modelValue:e.row.Name,"onUpdate:modelValue":t=>e.row.Name=t,onBlur:t=>n.handleEditBlur(e.row,"Name")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[h]]):((0,o.uX)(),(0,o.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:t=>n.handleEdit(e.row,"Name")},(0,l.v_)(e.row.Name||"未知"),9,K))])),_:1},8,["label"]),(0,o.bF)(u,{prop:"Id",label:"Id"},{default:(0,o.k6)((e=>[e.row.IdEditing?(0,o.bo)(((0,o.uX)(),(0,o.Wv)(i,{key:0,autofocus:"",size:"small",modelValue:e.row.Id,"onUpdate:modelValue":t=>e.row.Id=t,onBlur:t=>n.handleEditBlur(e.row,"Id")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[h]]):((0,o.uX)(),(0,o.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:t=>n.handleEdit(e.row,"Id")},(0,l.v_)(e.row.Id),9,O))])),_:1}),(0,o.bF)(u,{prop:"Password",label:e.$t("status.groupPassword")},{default:(0,o.k6)((e=>[e.row.PasswordEditing?(0,o.bo)(((0,o.uX)(),(0,o.Wv)(i,{key:0,type:"password","show-password":"",size:"small",modelValue:e.row.Password,"onUpdate:modelValue":t=>e.row.Password=t,onBlur:t=>n.handleEditBlur(e.row,"Password")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[h]]):((0,o.uX)(),(0,o.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:t=>n.handleEdit(e.row,"Password")},[n.globalData.isPhone?((0,o.uX)(),(0,o.CE)("span",Y,"***")):((0,o.uX)(),(0,o.CE)("span",q,(0,l.v_)(e.row.Password.replace(/.{1}/g,"*")),1))],8,R))])),_:1},8,["label"]),(0,o.bF)(u,{prop:"Oper",label:e.$t("status.groupOper"),width:"110",fixed:"right"},{header:(0,o.k6)((()=>[(0,o.Lk)("div",Z,[(0,o.Lk)("strong",null,(0,l.v_)(e.$t("status.groupOper")),1),H,(0,o.bF)(d,{name:"GroupSecretKey"})])])),default:(0,o.k6)((t=>[(0,o.Lk)("div",null,[(0,o.bF)(g,{title:e.$t("status.groupDelConfirm"),onConfirm:e=>n.handleDel(t.$index)},{reference:(0,o.k6)((()=>[(0,o.bF)(m,{type:"danger",size:"small"},{default:(0,o.k6)((()=>[(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.bF)(c)])),_:1})])),_:1})])),_:2},1032,["title","onConfirm"]),(0,o.bF)(m,{size:"small",onClick:e=>n.handleAdd(t.$index)},{default:(0,o.k6)((()=>[(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.bF)(v)])),_:1})])),_:2},1032,["onClick"])])])),_:1},8,["label"])])),_:1},8,["data","onCellDblclick"])])])),_:1},8,["title","modelValue"])}var M=a(35377),ee={props:["modelValue"],emits:["update:modelValue"],components:{Delete:X.epd,Plus:X.FWt,Select:X.l6P,Sync:M.A},setup(e,{emit:t}){const{t:a}=(0,j.s9)(),l=(0,A.B)(),n=(0,S.Kh)({list:l.value.config.Client.Groups,show:!0});(0,o.wB)((()=>l.value.config.Client.Groups),(()=>{0==n.list.filter((e=>e["__editing"])).length&&(n.list=l.value.config.Client.Groups)})),(0,o.wB)((()=>n.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=(e,t)=>{r(e,t.property)},r=(e,t)=>{n.list.forEach((e=>{e["NameEditing"]=!1,e["IdEditing"]=!1,e["PasswordEditing"]=!1})),e[`${t}Editing`]=!0,e["__editing"]=!0},i=(e,t)=>{e[`${t}Editing`]=!1,e["__editing"]=!1;try{e[t]=e[t].trim()}catch(a){}p()},u=e=>{n.list.splice(e,1),p()},d=e=>{n.list.filter((e=>""==e.Id||""==e.Name)).length>0?z.nk.error(a("status.groupValidate")):(n.list.splice(e+1,0,{Name:"",Id:"",Password:""}),p())},c=e=>{const t=n.list.slice(),o=t[e];t[e]=t[0],t[0]=o,(0,G.rd)({name:l.value.config.Client.Name.trim(),groups:t}).then((()=>{z.nk.success(a("common.oper")),setTimeout((()=>{window.location.reload()}),1e3)})).catch((e=>{console.log(e),z.nk.error(a("common.operFail"))}))},p=()=>{(0,G.zp)(n.list).then((()=>{z.nk.success(a("common.oper"))})).catch((e=>{console.log(e),z.nk.error(a("common.operFail"))}))};return{globalData:l,state:n,handleCellClick:s,handleEditBlur:i,handleEdit:r,handleDel:u,handleAdd:d,handleUse:c}}};const te=(0,U.A)(ee,[["render",J]]);var ae=te,oe={components:{ArrowDown:X.yd$,Avatar:X.euF,Groups:ae},props:["config"],setup(e){const{t:t}=(0,j.s9)(),a=(0,A.B)(),l=(0,o.EW)((()=>a.value.hasAccess("Group"))),n=(0,S.Kh)({loading:!1,connected:(0,o.EW)((()=>a.value.signin.Connected)),groupName:(0,o.EW)((()=>a.value.config.Client.Group.Name)),groups:(0,o.EW)((()=>a.value.config.Client.Groups)),showGroups:!1}),s=e=>{const t=a.value.config.Client.Groups,o=t.map(((e,t)=>(e.$index=t,e))).filter((t=>t.Id==e))[0].$index,l=t[o];t[o]=t[0],t[0]=l,r(t)},r=e=>{n.loading=!0,(0,G.rd)({Name:a.value.config.Client.Name,Groups:e}).then((()=>{n.loading=!1,n.show=!1,z.nk.success(t("common.oper")),setTimeout((()=>{window.location.reload()}),1e3)})).catch((e=>{console.log(e),n.loading=!1,z.nk.error(t("common.operFail"))}))};return{config:e.config,hasGroup:l,state:n,handleGroupChange:s}}};const le=(0,U.A)(oe,[["render",T],["__scopeId","data-v-74bb5e43"]]);var ne=le;const se={key:0,class:"flow-wrap"},re=["title"],ie=["title"],ue=["title"],de=["title"];function ce(e,t,a,n,s,r){const i=(0,o.g2)("Flow",!0);return(0,o.uX)(),(0,o.CE)(o.FK,null,[n.config?((0,o.uX)(),(0,o.CE)("div",se,[(0,o.Lk)("p",null,[(0,o.eW)((0,l.v_)(e.$t("status.flowOnline"))+" ",1),(0,o.Lk)("a",{href:"javascript:;",onClick:t[0]||(t[0]=e=>n.flow.map=!0),title:`${e.$t("status.flowThisServer")}\r\n${e.$t("status.flowOnline")}/${e.$t("status.flowOnline7Day")}`},(0,l.v_)(n.flow.overallOnline),9,re),(0,o.Lk)("a",{href:"javascript:;",onClick:t[1]||(t[1]=e=>n.flow.allmap=!0),title:`${e.$t("status.flowAllServer")}\r\n${e.$t("status.flowOnline")}/${e.$t("status.flowOnline7Day")}/${e.$t("status.flowServer")}`},(0,l.v_)(n.flow.serverOnline),9,ie)]),(0,o.Lk)("p",null,[(0,o.eW)((0,l.v_)(e.$t("status.flowUpload"))+" ",1),(0,o.Lk)("a",{href:"javascript:;",onClick:t[2]||(t[2]=e=>n.flow.count=!0),title:`${e.$t("status.flowThisServer")}\r\n${e.$t("status.flowAllSend")}`},(0,l.v_)(n.flow.overallSendtSpeed),9,ue)]),(0,o.Lk)("p",null,[(0,o.eW)((0,l.v_)(e.$t("status.flowDownload"))+" ",1),(0,o.Lk)("a",{href:"javascript:;",onClick:t[3]||(t[3]=e=>n.flow.count=!0),title:`${e.$t("status.flowThisServer")}\r\n${e.$t("status.flowAllReceive")}`},(0,l.v_)(n.flow.overallReceiveSpeed),9,de)])])):(0,o.Q3)("",!0),(0,o.bF)(i,{config:n.config,title:"服务器"},null,8,["config"])],64)}var pe=a(1257),me=a(66046),ge={props:["config"],components:{Flow:pe.A},setup(e){const{flow:t}=(0,me.Y)();return{config:e.config,flow:t}}};const ve=(0,U.A)(ge,[["render",ce],["__scopeId","data-v-6d5a2f7a"]]);var fe=ve;const ke=["title"],he={key:0,class:"progress"},we={key:1,class:"progress"};function be(e,t,a,n,s,r){const i=(0,o.g2)("Loading"),u=(0,o.g2)("el-icon"),d=(0,o.g2)("Download"),c=(0,o.g2)("CircleCheck");return(0,o.uX)(),(0,o.CE)("a",{href:"javascript:;",onClick:t[0]||(t[0]=(...e)=>n.handleUpdate&&n.handleUpdate(...e)),class:(0,l.C4)(["download",n.updateColor()]),title:n.updateText()},[(0,o.Lk)("span",null,(0,l.v_)(n.state.version),1),n.updaterServer.Version?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[1==n.updaterServer.Status?((0,o.uX)(),(0,o.Wv)(u,{key:0,size:"14",class:"loading"},{default:(0,o.k6)((()=>[(0,o.bF)(i)])),_:1})):2==n.updaterServer.Status?((0,o.uX)(),(0,o.Wv)(u,{key:1,size:"14"},{default:(0,o.k6)((()=>[(0,o.bF)(d)])),_:1})):3==n.updaterServer.Status||5==n.updaterServer.Status?((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[(0,o.bF)(u,{size:"14",class:"loading"},{default:(0,o.k6)((()=>[(0,o.bF)(i)])),_:1}),0==n.updaterServer.Length?((0,o.uX)(),(0,o.CE)("span",he,"0%")):((0,o.uX)(),(0,o.CE)("span",we,(0,l.v_)(parseInt(n.updaterServer.Current/n.updaterServer.Length*100))+"%",1))],64)):6==n.updaterServer.Status?((0,o.uX)(),(0,o.Wv)(u,{key:3,size:"14",class:"yellow"},{default:(0,o.k6)((()=>[(0,o.bF)(c)])),_:1})):(0,o.Q3)("",!0)],64)):((0,o.uX)(),(0,o.Wv)(u,{key:1,size:"14"},{default:(0,o.k6)((()=>[(0,o.bF)(d)])),_:1}))],10,ke)}var Ce=a(12933),ye=a(80920),_e={components:{Promotion:X.Yk4,Download:X.f5X,Loading:X.Rhj,CircleCheck:X.rW7,ServerFlow:pe.A},props:["config"],setup(e){const{t:t}=(0,j.s9)(),a=(0,A.B)(),l=(0,o.EW)((()=>a.value.hasAccess("UpdateServer"))),n=(0,S.KR)({Version:"",Status:0,Length:0,Current:0,Msg:[],DateTime:""}),s=(0,S.Kh)({show:!1,loading:!1,connected:(0,o.EW)((()=>a.value.signin.Connected)),version:(0,o.EW)((()=>a.value.signin.Version)),timer:0}),r=()=>{clearTimeout(s.timer),(0,ye.BJ)().then((e=>{n.value.Version=e.Version,n.value.Status=e.Status,n.value.Length=e.Length,n.value.Current=e.Current,n.value.Status>2&&n.value.Status<6&&(s.timer=setTimeout((()=>{r()}),1e3))})).catch((()=>{s.timer=setTimeout((()=>{r()}),1e3)}))},i=()=>n.value.Version?n.value.Status<=2?s.version!=n.value.Version?`${t("status.serverNotNew")}(${n.value.Version})`:`${t("status.serverNew")}`:{3:t("status.serverDownloading"),4:t("status.serverDownloaded"),5:t("status.serverUnZipIng"),6:t("status.serverUnZip")}[n.value.Status]:t("status.serverNoUpdate"),u=()=>s.version!=n.value.Version?"yellow":"green",d=()=>{e.config&&l.value&&([0,1,3,5].indexOf(n.value.Status)>=0?z.nk.error(t("common.operating")):6!=n.value.Status?2==n.value.Status&&Ce.s.confirm(t("status.serverConfirm"),t("common.tips"),{confirmButtonText:t("common.confirm"),cancelButtonText:t("common.cancel"),type:"warning"}).then((()=>{(0,ye.y2)(n.value.Version||a.value.signin.Version).then((()=>{setTimeout((()=>{r()}),1e3)}))})).catch((()=>{})):Ce.s.confirm(t("status.serverCloseConfirm"),t("common.tips"),{confirmButtonText:t("common.confirm"),cancelButtonText:t("common.cancel"),type:"warning"}).then((()=>{(0,ye.aP)()})).catch((()=>{})))};return(0,o.sV)((()=>{r()})),{config:e.config,state:s,updaterServer:n,handleUpdate:d,updateText:i,updateColor:u}}};const Fe=(0,U.A)(_e,[["render",be],["__scopeId","data-v-3886bb74"]]);var Ve=Fe,$e={components:{Groups:ne,Flow:fe,ServerVersion:Ve},props:["config"],setup(e){const t=(0,A.B)(),a=(0,o.EW)((()=>t.value.hasAccess("Flow"))),l=(0,S.Kh)({show:!1,loading:!1});return{config:e.config,hasFlow:a,state:l}}};const xe=(0,U.A)($e,[["render",D],["__scopeId","data-v-b198f5e0"]]);var Se=xe;const Ee={key:0,class:"status-export-wrap"},Le=["title"],Ae={key:0},We={class:"port-wrap"},Xe={class:"text"},Pe={class:"body"},Ue={class:"card-header"},Ie={class:"flex flex-nowrap"},Ne={style:{width:"11rem"}},Be={class:"flex flex-nowrap mgt-1"},De={style:{width:"11rem"}},Te={class:"flex flex-nowrap mgt-1"},Ge={style:{width:"11rem"}},ze={class:"port-wrap"},je={class:"port-wrap"},Qe={style:{"margin-top":"1rem"}};function Ke(e,t,a,n,s,r){const i=(0,o.g2)("Share"),u=(0,o.g2)("el-icon"),d=(0,o.g2)("el-checkbox"),c=(0,o.g2)("el-col"),p=(0,o.g2)("el-input"),m=(0,o.g2)("el-row"),g=(0,o.g2)("Access"),v=(0,o.g2)("el-card"),f=(0,o.g2)("el-button"),k=(0,o.g2)("el-dialog"),h=(0,o.gN)("trim");return n.config&&n.hasExport?((0,o.uX)(),(0,o.CE)("div",Ee,[(0,o.Lk)("a",{href:"javascript:;",title:e.$t("status.export"),onClick:t[0]||(t[0]=e=>n.state.show=!0)},[(0,o.bF)(u,{size:"16"},{default:(0,o.k6)((()=>[(0,o.bF)(i)])),_:1}),n.globalData.isPc?((0,o.uX)(),(0,o.CE)("span",Ae,(0,l.v_)(e.$t("status.export")),1)):(0,o.Q3)("",!0)],8,Le),(0,o.bF)(k,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:n.state.show,"onUpdate:modelValue":t[12]||(t[12]=e=>n.state.show=e),center:"",width:"580",top:"1vh"},{footer:(0,o.k6)((()=>[(0,o.bF)(f,{plain:"",onClick:t[11]||(t[11]=e=>n.state.show=!1),loading:n.state.loading},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(e.$t("common.cancel")),1)])),_:1},8,["loading"]),(0,o.bF)(f,{type:"default",plain:"",onClick:n.handleExport,loading:n.state.loading},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(e.$t("status.exportDownload")),1)])),_:1},8,["onClick","loading"]),(0,o.bF)(f,{type:"info",plain:"",onClick:n.handleCopy,loading:n.state.loading},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick","loading"]),(0,o.bF)(f,{type:"success",plain:"",onClick:n.handleSave,loading:n.state.loading},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(e.$t("status.exportSave")),1)])),_:1},8,["onClick","loading"])])),default:(0,o.k6)((()=>[(0,o.Lk)("div",We,[(0,o.Lk)("div",Xe,(0,l.v_)(e.$t("status.exportText")),1),(0,o.Lk)("div",Pe,[(0,o.bF)(v,{shadow:"never"},{header:(0,o.k6)((()=>[(0,o.Lk)("div",Ue,[(0,o.Lk)("div",null,[(0,o.bF)(m,null,{default:(0,o.k6)((()=>[(0,o.bF)(c,{span:12},{default:(0,o.k6)((()=>[(0,o.bF)(d,{disabled:n.onlyNode,modelValue:n.state.single,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.single=e),label:e.$t("status.exportSingle")},null,8,["disabled","modelValue","label"])])),_:1}),(0,o.bF)(c,{span:12},{default:(0,o.k6)((()=>[(0,o.Lk)("div",Ie,[(0,o.Lk)("span",Ne,(0,l.v_)(e.$t("status.exportName"))+" : ",1),(0,o.bo)((0,o.bF)(p,{disabled:!n.state.single,modelValue:n.state.name,"onUpdate:modelValue":t[2]||(t[2]=e=>n.state.name=e),maxlength:"32","show-word-limit":""},null,8,["disabled","modelValue"]),[[h]])])])),_:1})])),_:1})]),(0,o.Lk)("div",null,[(0,o.bF)(m,null,{default:(0,o.k6)((()=>[(0,o.bF)(c,{span:12},{default:(0,o.k6)((()=>[(0,o.Lk)("div",Be,[(0,o.Lk)("span",De,(0,l.v_)(e.$t("status.exportWebport"))+" : ",1),(0,o.bo)((0,o.bF)(p,{disabled:n.onlyNode,modelValue:n.state.webport,"onUpdate:modelValue":t[3]||(t[3]=e=>n.state.webport=e)},null,8,["disabled","modelValue"]),[[h]])])])),_:1}),(0,o.bF)(c,{span:12},{default:(0,o.k6)((()=>[(0,o.Lk)("div",Te,[(0,o.Lk)("span",Ge,(0,l.v_)(e.$t("status.exportApiPassword"))+" : ",1),(0,o.bo)((0,o.bF)(p,{type:"password","show-password":"",disabled:n.onlyNode,modelValue:n.state.apipassword,"onUpdate:modelValue":t[4]||(t[4]=e=>n.state.apipassword=e),maxlength:"36","show-word-limit":""},null,8,["disabled","modelValue"]),[[h]])])])),_:1})])),_:1})]),(0,o.Lk)("div",null,[(0,o.bF)(m,null,{default:(0,o.k6)((()=>[(0,o.bF)(c,{xs:12,sm:8},{default:(0,o.k6)((()=>[(0,o.bF)(d,{modelValue:n.state.relay,"onUpdate:modelValue":t[5]||(t[5]=e=>n.state.relay=e),label:e.$t("status.exportRelay")},null,8,["modelValue","label"])])),_:1}),(0,o.bF)(c,{xs:12,sm:8},{default:(0,o.k6)((()=>[(0,o.bF)(d,{modelValue:n.state.updater,"onUpdate:modelValue":t[6]||(t[6]=e=>n.state.updater=e),label:e.$t("status.exportUpdater")},null,8,["modelValue","label"])])),_:1}),(0,o.bF)(c,{xs:12,sm:8},{default:(0,o.k6)((()=>[(0,o.bF)(d,{modelValue:n.state.group,"onUpdate:modelValue":t[7]||(t[7]=e=>n.state.group=e),label:e.$t("status.exportGroup")},null,8,["modelValue","label"])])),_:1}),(0,o.bF)(c,{xs:12,sm:8},{default:(0,o.k6)((()=>[(0,o.bF)(d,{modelValue:n.state.server,"onUpdate:modelValue":t[8]||(t[8]=e=>n.state.server=e),label:e.$t("status.exportServer")},null,8,["modelValue","label"])])),_:1}),(0,o.bF)(c,{xs:12,sm:8},{default:(0,o.k6)((()=>[(0,o.bF)(d,{modelValue:n.state.super,"onUpdate:modelValue":t[9]||(t[9]=e=>n.state.super=e),label:e.$t("status.exportSuper")},null,8,["modelValue","label"])])),_:1}),(0,o.bF)(c,{xs:12,sm:8},{default:(0,o.k6)((()=>[(0,o.bF)(d,{modelValue:n.state.tunnel,"onUpdate:modelValue":t[10]||(t[10]=e=>n.state.tunnel=e),label:e.$t("status.exportTunnel")},null,8,["modelValue","label"])])),_:1})])),_:1})])])])),default:(0,o.k6)((()=>[(0,o.bF)(g,{ref:"accessDom",machineid:n.machineId,height:30},null,8,["machineid"])])),_:1})])])])),_:1},8,["title","modelValue"]),(0,o.bF)(k,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:n.state.showCopy,"onUpdate:modelValue":t[14]||(t[14]=e=>n.state.showCopy=e),center:"",width:"580",top:"1vh"},{footer:(0,o.k6)((()=>[(0,o.bF)(f,{plain:"",onClick:n.copyToClipboard},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick"])])),default:(0,o.k6)((()=>[(0,o.Lk)("div",ze,[(0,o.bo)((0,o.bF)(p,{modelValue:n.state.copyContent,"onUpdate:modelValue":t[13]||(t[13]=e=>n.state.copyContent=e),type:"textarea",rows:10,resize:"none",readonly:""},null,8,["modelValue"]),[[h]])])])),_:1},8,["title","modelValue"]),(0,o.bF)(k,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:n.state.showSave,"onUpdate:modelValue":t[17]||(t[17]=e=>n.state.showSave=e),center:"",width:"300",top:"1vh"},{footer:(0,o.k6)((()=>[(0,o.bF)(f,{plain:"",onClick:n.copySaveToClipboard},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick"])])),default:(0,o.k6)((()=>[(0,o.Lk)("div",je,[(0,o.Lk)("div",null,[(0,o.bo)((0,o.bF)(p,{modelValue:n.state.saveServer,"onUpdate:modelValue":t[15]||(t[15]=e=>n.state.saveServer=e),readonly:""},null,8,["modelValue"]),[[h]])]),(0,o.Lk)("div",Qe,[(0,o.bo)((0,o.bF)(p,{modelValue:n.state.saveContent,"onUpdate:modelValue":t[16]||(t[16]=e=>n.state.saveContent=e),readonly:""},null,8,["modelValue"]),[[h]])])])])),_:1},8,["title","modelValue"])])):(0,o.Q3)("",!0)}var Oe=a(88835),Re=a(87586),Ye={components:{Share:X.SYj,Access:Re.A},props:["config"],setup(e){const{t:t}=(0,j.s9)(),a=(0,A.B)(),l=(0,o.EW)((()=>a.value.hasAccess("Export"))),n=(0,o.EW)((()=>a.value.config.Client.OnlyNode)),s=(0,o.EW)((()=>a.value.config.Client.Id)),r=(0,S.Kh)({show:!1,loading:!1,single:!0,name:"",apipassword:n.value?a.value.config.Client.CApi.ApiPassword:"",webport:a.value.config.Client.CApi.WebPort,relay:!0,updater:!0,server:!0,super:!1,group:!0,tunnel:!0,copyContent:"",showCopy:!1,saveServer:a.value.config.Client.Server.Host,saveContent:"",showSave:!1}),i=(0,S.KR)(null),u=()=>{if(!l.value)return void z.nk.success("无权限");const e=i.value.getValue(),a={access:e[0],fullAccess:e[1],single:r.single,name:r.name,apipassword:r.apipassword,webport:+r.webport,relay:r.relay,updater:r.updater,server:r.server,super:r.super,group:r.group,tunnel:r.tunnel};if(a.single){if(!a.name)return void z.nk.error(t("status.exportNamePlease"))}else a.name="";if(a.apipassword){if(!(!a.webport||isNaN(a.webport)||a.webport<=0||a.webport>65535))return a;z.nk.error(t("status.exportWebportPlease"))}else z.nk.error(t("status.exportApiPasswordPlease"))},d=()=>{const e=document.createElement("a");r.single?e.download=`client-node-export-${r.name}.zip`:e.download="client-node-export.zip",e.href="/client-node-export.zip",document.body.appendChild(e),e.click(),document.body.removeChild(e)},c=()=>{const e=u();e&&(r.loading=!0,(0,Oe.ql)(e).then((e=>{r.loading=!1,e?(r.show=!1,z.nk.success(t("common.oper")),r.saveContent=e,r.showSave=!0):z.nk.error(t("common.operFail"))})).catch((()=>{z.nk.error(t("common.operFail")),r.loading=!1})))},p=async()=>{try{return await navigator.clipboard.writeText(`在初始化linker客户端时，填写服务器和密钥，导入配置\n服务器: ${r.saveServer}\n密钥: ${r.saveContent}`),z.nk.success(t("common.oper")),!0}catch(e){return z.nk.error(t("common.operFail")),!1}},m=()=>{const e=u();e&&(r.loading=!0,(0,Oe.P$)(e).then((()=>{r.loading=!1,r.show=!1,z.nk.success(t("common.oper")),d()})).catch((()=>{z.nk.error(t("common.operFail")),r.loading=!1})))},g=()=>{const e=u();e&&(r.loading=!0,(0,Oe.om)(e).then((e=>{r.loading=!1,r.show=!1,z.nk.success(t("common.oper")),r.copyContent=e,r.showCopy=!0})).catch((()=>{z.nk.error(t("common.operFail")),r.loading=!1})))},v=async()=>{try{return await navigator.clipboard.writeText(r.copyContent),z.nk.success(t("common.oper")),!0}catch(e){return z.nk.error(t("common.operFail")),!1}};return{globalData:a,config:e.config,onlyNode:n,hasExport:l,machineId:s,state:r,accessDom:i,handleSave:c,handleExport:m,handleCopy:g,copyToClipboard:v,copySaveToClipboard:p}}};const qe=(0,U.A)(Ye,[["render",Ke],["__scopeId","data-v-74a0500e"]]);var Ze=qe,He=a(31480),Je={components:{Api:N,Server:Se,Export:Ze,UpdaterBtn:He.A},props:["config"],setup(e){const t=(0,A.B)(),a=(0,o.EW)((()=>t.value.self)),l=(0,S.Kh)({showPay:!1});return{globalData:t,state:l,config:e.config,self:a}}};const Me=(0,U.A)(Je,[["render",x],["__scopeId","data-v-266a4cf4"]]);var et=Me},7199:function(e,t,a){a.d(t,{A:function(){return g}});var o=a(56768);const l=e=>((0,o.Qi)("data-v-4b6a124c"),e=e(),(0,o.jt)(),e),n={key:0,class:"image"},s=l((()=>(0,o.Lk)("input",{type:"file",id:"file-input"},null,-1)));function r(e,t,a,l,r,i){const u=(0,o.g2)("PictureRounded"),d=(0,o.g2)("el-icon");return l.globalData.isPc?((0,o.uX)(),(0,o.CE)("div",n,[(0,o.Lk)("a",{href:"javascript:;",onClick:t[0]||(t[0]=(...e)=>l.handleBg&&l.handleBg(...e))},[(0,o.bF)(d,null,{default:(0,o.k6)((()=>[(0,o.bF)(u)])),_:1})]),s])):(0,o.Q3)("",!0)}var i=a(53830),u=a(57477),d=a(12933),c={components:{PictureRounded:u.syp},props:["name"],setup(e){const t=(0,i.B)(),a=`bg-${e.name}`,l=()=>{localStorage.getItem(a)?d.s.confirm("清除背景？","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{s()})).catch((()=>{})):document.getElementById("file-input").click()},n=e=>{const t=e.target.files[0];if(t)try{const e=new FileReader;e.onload=function(e){s(e.target.result)},e.readAsDataURL(t)}catch(a){}e.target.value=""},s=e=>{e?(document.body.className="sunny",localStorage.setItem(a,e),document.body.style=`background-image:url(${e})`):(document.body.className="",document.body.style="",localStorage.setItem(a,""))};return(0,o.sV)((()=>{const e=document.getElementById("file-input");e&&e.addEventListener("change",n),s(localStorage.getItem(a))})),{globalData:t,handleBg:l}}},p=a(71241);const m=(0,p.A)(c,[["render",r],["__scopeId","data-v-4b6a124c"]]);var g=m}}]);